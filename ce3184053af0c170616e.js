!function(){"use strict";self.onmessage=function(r){"pending"===r.data.type&&t.transaction(r.data.buffer)};var t={transaction:function(r){var n=t.to16kHz(r),e=t.to16BitPCM(n);self.postMessage({buffer:e,type:"transform"})},to16kHz:function(t){var r=new Float32Array(t),n=Math.round(r.length*(16e3/44100)),e=new Float32Array(n),a=(r.length-1)/(n-1);e[0]=r[0];for(var o=1;o<n-1;o++){var f=o*a,i=Number(Math.floor(f).toFixed()),u=Number(Math.ceil(f).toFixed()),s=f-i;e[o]=r[i]+(r[u]-r[i])*s}return e[n-1]=r[r.length-1],e},to16BitPCM:function(t){for(var r=2*t.length,n=new ArrayBuffer(r),e=new DataView(n),a=0,o=0;o<t.length;o++,a+=2){var f=Math.max(-1,Math.min(1,t[o]));e.setInt16(a,f<0?32768*f:32767*f,!0)}return Array.from(new Int8Array(e.buffer))},toBase64:function(t){for(var r="",n=new Uint8Array(t),e=n.byteLength,a=0;a<e;a++)r+=String.fromCharCode(n[a]);return window.btoa(r)}}}();
//# sourceMappingURL=ce3184053af0c170616e.js.map